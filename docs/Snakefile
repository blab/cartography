rule all:
    input:
        #"cartography.pdf",
        "cartography.html"

rule manuscript_pdf:
    input:
        manuscript = "cartography.md"
    output:
        manuscript = "cartography.pdf"
    conda: "../cartography.yml"
    shell:
        """
        pandoc --citeproc --bibliography=cartography.bib -s {input.manuscript} -o {output.manuscript}
        """

rule manuscript_html:
    input:
        manuscript = "cartography.md",
        bibliography = "cartography.bib",
        csl = "chicago-author-date.csl",
        template = "pandoc-scholar.html",
        css = "pandoc-scholar.css"
    output:
        manuscript = "cartography.html"
    conda: "../cartography.yml"
    shell:
        """
        pandoc \
            --filter pandoc-crossref \
            --citeproc \
            --bibliography={input.bibliography} \
            --csl {input.csl} \
            --template {input.template} \
            --css {input.css} \
            -s {input.manuscript} \
            -o {output.manuscript}
        """
